# some sane vim-like keybindings
bind index,pager k previous-entry
bind index,pager j next-entry
bind index,pager g noop
bind index,pager \Cu half-up
bind index,pager \Cd half-down
bind pager gg top
bind index gg first-entry
bind pager G bottom
bind index G last-entry

# sidebar Navigation
bind index,pager <ESC>j sidebar-next
bind index,pager <ESC>k sidebar-prev
bind index,pager <ESC><space> sidebar-open

# global index and pager shortcuts
bind index,pager @ compose-to-sender
bind index,pager R group-reply
# bind index,pager D purge-message
bind index <tab> sync-mailbox
bind index <space> collapse-thread

# address book integration
bind editor <Tab> complete-query
bind editor ^T complete

# Save all attachments
macro pager S "<pipe-message> ripmime -i - -d ~/Downloads && rm ~/Downloads/textfile*" "Save all non-text attachments using ripmime"
# opening urls with urlscan
macro pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
# Sync all email
macro index,pager O "<shell-escape>~/.bin/syncmail all<enter>" "sync all mail"
# Purge selected messages
macro index,pager <ESC>X "<purge-message>" "purge message"

# Reset limit: show all messages again
macro index a "<limit>all\n" "show all messages (undo limit)"


###########
# notmuch #
###########

# read entire thread of the current message
bind index,pager + entire-thread

# tag as inbox
macro index,pager <ESC>I "<modify-labels-then-hide>+inbox -archive -trash -spam<enter>"
# tag as archive
macro index,pager <ESC>A "<modify-labels-then-hide>+archive -inbox -unread -todo -reminder -trash -spam<enter>"
# tag as todo
macro index,pager <ESC>T "<modify-labels-then-hide>+inbox +todo -archive -reminder -trash -spam<enter>"
# tag as reminder
macro index,pager <ESC>R "<modify-labels-then-hide>+inbox +reminder -archive -todo -trash -spam<enter>"
# tag as trash
macro index,pager <ESC>D "<modify-labels-then-hide>+trash -spam -inbox -unread -archive<enter>"
# tag as spam
macro index,pager <ESC>J "<modify-labels-then-hide>+spam -inbox -unread -archive -trash<enter>"
