# # Prefixes
# super + w             -> window manager
# super + n             -> nodes
# super + d             -> desktops
# super + m             -> monitors
# super + s             -> misc
#
# super + ctrl          -> move nodes
# super + alt           -> resize nodes

#########
# bspwm #
#########

# bspwm general
###############

# reload bspwm
super + w ; r
    pkill -USR1 -x sxhkd

# restart bspwm
super + w ; shift + r
    bspc wm --restart

# toggle panel
super + w ; p
    panel-toggle


# bspwm nodes
#############

# focus node
super + {h,j,k,l}
    bspc node --focus {west,south,north,east}

# focus last node
super + space
    bspc node --focus last

# close/kill node
super + n ; {q,x}
    bspwm-node-close {close,kill}

# set node state
super + n ; s ; {t,s,f}
    bspc node --state {tiled,floating,fullscreen}

# set node flags
super + n ; f ; {m,l,s,p}
    bspc node --flag {marked,locked,sticky,private}

# reset node flags
super + n ; f ; shift + {m,l,s,p}
    flag={marked,locked,sticky,private}; \
    for node in $(bspc query --nodes --node ".$flag"); do \
        bspc node "$node" --flag "${flag}=off"; \
    done

# move node on current desktop
super + ctrl + {h,j,k,l}
    bspwm-node-move {west,south,north,east}

# move node to desktop by number
super + ctrl + {1-9,0}
    bspc node --to-desktop 'focused:^{1-9,10}'

# move node to next/previous monitor
super + ctrl + {n,p}
    bspc node --to-monitor {next,prev} --follow

# move node to a new desktop
# TODO not only move the focused but prefer all marked
super + n ; m ; a
    bspwm-node-move-to-new-desktop

# preselect the direction
super + n ; p ; {h,j,k,l}
    bspc node --presel-dir {west,south,north,east}

# cancel the preselection for the focused node
super + Escape
    bspc node --presel-dir cancel

# resize node
super + alt + {h,j,k,l}
    bspwm-node-resize {west,south,north,east} 50

# raise/lower node
super + n ; {plus,minus,equal}
    bspc node --layer {above,below,normal}

# create receptacle
super + r ; c ; {h,j,k,l}
    bspc node --presel-dir {west,south,north,east} --insert-receptacle 

# move node to oldest receptacle
super + r ; m
    bspc node focused --to-node "$(bspc query --nodes --node 'any.leaf.!window')" --follow

# remove receptacles on current desktop
super + r ; q
    for node in "$(bspc query --nodes --node '.leaf.!window.local')"; do bspc node "$node" --kill; done

# tabbed
#super + t ; {a,d}
#    bspwm-tabbed {create,detach}


# bspwm desktops
################

# focus desktop by number
super + {1-9,0}
    bspc desktop --focus 'focused:^{1-9,10}'

# focus last/next/previous desktop
super + shift + {space,n,p}
    bspc desktop --focus {last,next.local,prev.local}

# bubble desktop left/right
super + shift + {h,l}
    bspc desktop --bubble {prev,next}

# add/rename/remove/purge desktops
super + d ; {c,r,q,x}
    bspwm-desktop-{add,rename,remove,purge}

# set layout
super + d ; s ; {m,t,l}
    bspc desktop --layout {monocle,tiled,next}


# bspwm monitors
################

# focus next/previous monitor
super + m ; {n,p}
    bspc monitor --focus {next,previous}


################
# applications #
################

super + Return
    st

super + ctrl + Return
    st -e tmux


##############
# rofi menus #
##############

super + period
    rofi -show drun

super + minus
    rofi -show window

super + comma
    sessionmenu


########
# misc #
########

# volume
########

{_,ctrl +} XF86Audio{Raise,Lower}Volume
    vol {Master,Mic} {inc,dec} 5

{_,ctrl +} XF86AudioMute
    vol {Master,Mic} toggle


# other
#######

# copy between clipboard and primary buffer
super + s ; c ; {c,p}
    {p2cb,cb2p} notify

# lock screen
super + s ; l
    xautolock -locknow

# sync mail
super + s ; m
    PINENTRY_USER_DATA=gtk syncmail -n all
